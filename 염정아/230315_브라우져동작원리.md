# 브라우저 동작 원리

[참고 포스팅](https://d2.naver.com/helloworld/59361)

## 브라우저의 주요기능

- 사용자가 선택한 자원을 서버에 요청 -> HTML, CSS 명세에 따라 브라우져에 표시
  - 자원: HTML, PDF, Image 등등
  - 자원은 URI 에 의해 정해진다.
  - 웹 명세는 W3C 에서 결정
- 사용자 인터페이스 제공
  - URI 주소 표시줄
  - 이전, 다음 버튼
  - 북마크
  - 새로고침 버튼, 중단 버튼
  - 홈 버튼 etc

## 브라우저의 기본 구조

<img src="https://d2.naver.com/content/images/2015/06/helloworld-59361-1.png"/>

1. 사용자 인터페이스

2. 브라우저 엔진

- UI 와 렌더링 엔진 사이의 동작 제어

3. 렌더링 엔진

- 요청한 콘텐츠 표시

4. 통신

- 네트워크 호출에 사용
- 각 플랫폼 하부에서 실행

5. UI 백엔드

- 기본적인 장치 그림 (ex 콤보박스, 브라우저 창)
- 플랫폼에서 명시하지 않는 일반적인 인터페이스
- OS 사용자 인터페이스 체계를 사용

6. 자바스크립트 해석기
7. 자료 저장소

- 자료 저장
- 쿠기, 로컬, 세션 스토리지

## 렌더링 엔진

### 브라우저에 따른 렌더링 엔진

- 파이어폭스 -> 게코(gecko) 엔진 사용
- 사파리, 크롬 -> 웹킷(webkit) 엔진

### 렌더링 엔진 동작과정

<img src="https://d2.naver.com/content/images/2015/06/helloworld-59361-2.png"/>

- 통신으로부터 요청한 문서의 내용을 얻는다.
- 문서의 내용은 보통 8KB 단위로 전송
- HTML 파싱 -> 태그를 DOM 노드로 변경
- 외부 CSS 파일 스타일 요소 파싱
- 스타일 정보 & HTML 표시 규칙 -> 렌더 트리라는 또 다른 트리 생성
- 받은 내용의 일부를 먼저 화면에 표시

## 파싱과 DOM 트리 구축

- 브라우저가 코드를 이해하고 사용할 수 있는 구조로 변환하는 과정
- output: 노드 트리 (파싱트리, 문법트리 라고도 불린다.)
  - 문서 구조를 나타낸다.

## 파서가 하는 일

1. 어휘 분석기

- 자료를 유효한 토큰으로 분해
- 토큰 변환기 라고도 부른다.
- 공백과 줄바꿈 같은 의미없는 문자 제거

2. 파서

- 언어 구문 규칙에 따라 문서 구조 분석
- 파싱 트리 생성
- 구문 규칙과 일치하는지 확인하고 맞다면 파싱트리에 노드 추가

## DOM

- Document Object Model
- 문서 객체 모델
- HTML 문서의 객체 표현
- 자바스크립트와 HTML 요소의 연결 지정
- 트리의 최상위 객체는 문서

## HTML 토큰

- 시작 태그
- 종료 태그
- 속성 이름
- 속성 값

## 스타일 시트 다단계 순서

1. 브라우저 선언
2. 사용자 일반 선언
3. 저작자 일반 선언
4. 저작자 중요 선언
5. 사용자 중요 선언

## 그리기 순서

1. 배경 색
2. 배경 이미지
3. 테두리
4. 자식
5. 아웃라인

## CSS 박스 모델

<img src="https://d2.naver.com/content/images/2015/06/helloworld-59361-19.png"/>
